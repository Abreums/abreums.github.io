---
title: "Counting percentuals with curly-curly"
author: "Marcos Abreu"
date: "2022-10-10"
execute: 
  warning: false
  erro: false
  
image: "count_percent.png"
categories: [Rstat]
---

```{r}
#| output: false
#| echo: false

library(tidyverse)
library(scales)
library(palmerpenguins)
```

The *count* function from *dplyr* package is one of my favorites for *data wrangling*.

I like to include a percent column to the function results.

```{r error=FALSE, warning=FALSE}

penguins %>% 
  count(species, sort = T) %>% 
  mutate(percent = scales::percent(n/sum(n), scale = 100))
```

Whenever more than one column will be counted it is nice to write a small function for that.

```{r}
count_percent <- function(df, a_column) {
  df %>% 
    count({{a_column}}) %>% 
    mutate(percent = scales::percent(n/sum(n), scale = 100))
}

penguins %>% 
  count_percent(species)

penguins %>% 
  count_percent(island)

```

Para esta função funcionar é preciso utilizar o operador curly-curly*.*
