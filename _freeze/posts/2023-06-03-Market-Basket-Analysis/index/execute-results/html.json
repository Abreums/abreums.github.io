{
  "hash": "3910fab2dc813fd50dcc8c0b1fa03244",
  "result": {
    "markdown": "---\ntitle: \"Market Basket Analysis\"\ndescription: \"Conceitos de Market Basket Analysis\"\ndate: 2023-06-03\nexecute:\n  echo: false\nauthor: \n  - name: Marcos Abreu\n    url: https://abreums.github.io\n    orcid: 0000-0003-4772-7955\ncitation:\n  type: post-weblog\n  url: https://abreums.github.io/posts/2023-06-03-Market-Basket-Analysis/\n  language: pt-br\nimages: plot.png\ncategories: [Rstats]\n---\n\n\n*Market Basket Analysis* ou Análise de Cesta de Compras (também é conhecida como *Association Rule Mining* - mineração de regras de associação) permite a análise de associações de elementos.\n\nO valor desta técnica é descobrir associações não-óbvias que sirvam de insumo para a tomada de decisões.\n\nPara apresentar os principais conceitos vamos utilizar um universo de transações compostas por 6 transações cada uma com os itens:\n\n\n\n\n\n## Principais conceitos para análise de associações\n\nPara realizarmos a análise vamos utilizar alguns conceitos.\n\nO primeiro dele é o de **Regra de Associação**, ou simplesmente **regra**. Uma regra é uma relação entre 2 ou mais produtos. A regra **A -\\> B** significa a associação dos dois produtos A e B serem comprados juntos. Ou ainda **(A,C) -\\> B** significa a análise se a compra de B e C está associada à compra de B.\n\nNa regra **A -\\> B**, A é chamado LHS (*Left Hand Side*) e B é chamado de RHS (*Right Hand Side*).\n\nPara um produto ou uma regra podemos determinar as seguintes medições:\n\n1.  Suporte (*Support*)\n2.  Confiança (*Confidence*)\n3.  Sustentação (*Sustentação*)\n4.  Convicção (*Conviction*)\n\nVamos analisar o significado de cada um deles.\n\n### Suporte\n\nSuporte é a probabilidade com que um produto ou regra de aparecer no universo de transações analisadas.\n\n$$\n\\begin{aligned}\n\\begin{split}\nSupport & = \\frac{Número\\ de\\ transações\\ na\\ qual\\ X\\ aparece}{Número\\ total\\ de\\ transações}\\\\\n        & = P(X)\n\\end{split}\n\\end{aligned}\n$$\n\nSuporte também pode ser calculado para regras.\n\nO suporte de uma regra indica a probabilidade de uma regra aparecer dentro do conjunto de todas as transações.\n\n$$\nsupp(A\\ \\rightarrow\\ B) = P(A \\cap B)\n$$\n\nPor exemplo, podemos calcular o supporte para as seguintes regras do nosso exemplo:\n\n-   supp((shirt, umbrella) -\\> headphones) = ?\n\n-   supp(flask, radio) -\\> shirt) = ?\n\n-   supp(headphone -\\> radio) =?\n\n\n\n\n\nUm conceito derivado do suporte é o do **limite do suporte** (*support threashold*).\n\nChamamos de limite do suporte ao valor do suporte de um item ou regra que possua valor significativo para os lucros.\n\nNeste caso, consideraremos apenas as demais regras e items que estejam acima deste limite.\n\n## Confiança\n\nA confiança de uma regra indica a probabilidade condicional de A e B serem comprados dado que A é comprado.\n\n$$\n\\begin{equation}\n\\begin{split}\nConfidence(A\\ \\rightarrow\\ B) & = \\frac{Support(A, B)}{Support(A)}\\\\\n           & = \\frac{P(A \\cap B)}{P{A}}\\\\\n           & = P(B|A)\n\\end{split}\n\\end{equation}\n$$\n\nNo nosso exemplo, podemos perguntar \"Qual a confiança de que quando *umbrella* e *headphones* são comoprados, *radio* também será comprado\"?\n\n$$\nConfidence((umbrella, headphones)\\ \\rightarrow\\ radio) = ?\n$$\n\nConfiança é uma medida que traz um pequeno problema.\n\nEventualmente o produto RHS (*right hand side*) possui um forte poder de venda por si só.\n\nNeste caso, a informação sobre a confiança não é necessariamente verdadeira: não sabemos se RHS (*right hand side*) está sendo comprado em função de LHS (*left hand side*) ou por si só.\n\nPara resolvermos isto, utilizamos outra medição chamada Sustentação (*lift*).\n\n### Sustentação\n\nA sustentação mede se a ocorrência da regra $A\\ \\rightarrow\\ B$ é maior do que as ocorrências de $A$ e $B$ individualmente.\n\nO valor da sustentação indica quantas vezes é mais provável encontrarmos a regra do que seus componentes. Isto significa que se o valor for maior que 1, a regra é significativa. Se o valor for menor do que 1 a regra não é significativa.\n\n$$\n\\begin{equation}\n\\begin{split}\nLift(A\\ \\rightarrow\\ B) & = \\frac{Confiança(A\\ \\rightarrow\\ B)}{Support(B)}\\\\\n                        & = \\frac{P(A \\cap B)}{P(A)\\ *\\ P(B)}\n\\end{split}\n\\end{equation}\n$$\n\n## Convicção\n\nConvicção mede se a associação entre RHS (*right hand side*) e LHS(*left hand side*).\n\nConviction = \\\\frac{1\\\\ -\\\\ Support(Y)}{1\\\\ -\\\\ Confidence(X-\\>Y)}\n\n## Algoritmo arules\n\n*Arules* é um algoritmo que mapeia todas as associações possíveis entre as variáveis existentes e assim permite que seja feita uma análise de mineração de regras significativas.\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}