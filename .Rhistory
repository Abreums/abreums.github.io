columns = c(`2007`, `2008`, `2009`)
) %>%
gt_plt_sparkline(evolution)
#| echo: fenced
#| warning: false
#| message: false
penguins_gt <-
penguins %>%
count(species, year) %>%
group_by(species) %>%
mutate(evolution = list(n)) %>%
ungroup() %>%
pivot_wider(names_from = year,
values_from = n) %>%
relocate(evolution, .after = last_col()) %>%
gt() %>%
tab_header(title = "Pinguins no Arquipélago Palmer na Antártica",
subtitle = "palmerpinguins in R dataset") %>%
opt_align_table_header(align = "left") %>%
cols_align(align = "left",
columns = c(species)) %>%
cols_align(align = "right",
columns = c(`2007`, `2008`, `2009`)) %>%
cols_align(align = "center",
columns = c(evolution)) %>%
cols_label(
species = "Espécie",
evolution = "Evolução"
) %>%
tab_spanner(
label = c("Ano de medição"),
columns = c(`2007`, `2008`, `2009`)
) %>%
gt_plt_sparkline(evolution)
penguins_gt
penguins_gt %>% gt_save(filename = "penguins.png")
penguins_gt %>% gtsave(filename = "penguins.png")
install.packages("webshot2")
penguins_gt %>% gtsave(filename = "penguins.png")
getwd()
penguins_gt %>% gtsave(filename = "penguins.png",
path = "./posts/2022-11-06-r-tip-tabelas-com-gtextras")
getwd()
penguins_gt <-
penguins %>%
count(island, year, species, sex) %>%
mutate(island = str_c("Ilha: ", island)) %>%
filter(!is.na(sex)) %>%
pivot_wider(names_from = c(species, sex),
values_from = n,
names_glue = "{species} ({sex})",
values_fill = NA) %>%
gt(rowname_col = "year",
groupname_col = "island") %>%
tab_header(title = "Pinguins no Arquipélago Palmer na Antártica",
subtitle = "palmerpinguins in R dataset") %>%
opt_align_table_header(align = "left") %>%
cols_align(align = "right",
columns = c(`Adelie (female)`, `Adelie (male)`,
`Gentoo (female)`, `Gentoo (male)`,
`Chinstrap (female)`, `Chinstrap (male)`)) %>%
cols_label(
`Adelie (female)` = "female",
`Adelie (male)`   = "male",
`Gentoo (female)` = "female",
`Gentoo (male)`   = "male",
`Chinstrap (female)` = "female",
`Chinstrap (male)` = "male"
) %>%
tab_spanner(
label = c("Adele"),
columns = c(`Adelie (female)`, `Adelie (male)`)
) %>%
tab_spanner(
label = c("Gentoo"),
columns = c(`Gentoo (female)`, `Gentoo (male)`)
) %>%
tab_spanner(
label = c("Chinstrap"),
columns = c(`Chinstrap (female)`, `Chinstrap (male)`)
) %>%
tab_style(style = cell_text(weight = "bold"),
location = cells_column_spanners()) %>%
tab_style(style = cell_text(weight = "bold"),
location = cells_row_groups()) %>%
sub_missing(
columns = everything(),
missing_text = "-"
)
fns_labels <-
list(
# avg = ~mean(., na.rm = TRUE),
`Média` = ~mean(., na.rm = TRUE)
#,
# s.d. = ~sd(., na.rm = TRUE)
)
penguins_gt <-
penguins_gt %>%
summary_rows(
groups = TRUE,
columns = c(`Adelie (female)`, `Adelie (male)`,
`Gentoo (female)`, `Gentoo (male)`,
`Chinstrap (female)`, `Chinstrap (male)`),
fns = fns_labels,
formatter = fmt_number,
decimals = 0
) %>%
tab_style(style = cell_fill(color = "lightgray"),
location = cells_summary())
penguins_gt <-
penguins_gt %>%
sub_zero(columns = c(`Adelie (female)`, `Adelie (male)`,
`Gentoo (female)`, `Gentoo (male)`,
`Chinstrap (female)`, `Chinstrap (male)`),
zero_text = "-")
fns_grand_labels <-
list(
`Média Geral` = ~mean(., na.rm = TRUE)
)
penguins_gt <-
penguins_gt %>%
grand_summary_rows(
columns = c(`Adelie (female)`, `Adelie (male)`,
`Gentoo (female)`, `Gentoo (male)`,
`Chinstrap (female)`, `Chinstrap (male)`),
fns = fns_grand_labels,
formatter = fmt_number,
decimals = 0,
missing_text = "-"
) %>%
tab_style(style = cell_fill(color = "darkgray"),
location = cells_grand_summary())
penguins_gt %>% gtsave(filename = "penguins.png",
path = "./posts/2022-11-05-r-tip-criando-tabelas-com-o-pacote-gt")
penguins_gt %>% gtsave(filename = "penguins.png",
path = "./2022-11-05-r-tip-criando-tabelas-com-o-pacote-gt")
penguins_gt
penguins_gt %>%
gtsave(filename = "penguins.png",
path = "./2022-11-05-r-tip-criando-tabelas-com-o-pacote-gt/")
penguins_gt %>%
gtsave(filename = "penguins.png",
path = "./2022-11-05-r-tip-criando-tabelas-com-o-pacote-gt")
getwd()
penguins_gt <-
penguins %>%
count(island, year, species, sex) %>%
mutate(island = str_c("Ilha: ", island)) %>%
filter(!is.na(sex)) %>%
pivot_wider(names_from = c(species, sex),
values_from = n,
names_glue = "{species} ({sex})",
values_fill = NA) %>%
gt(rowname_col = "year",
groupname_col = "island") %>%
tab_header(title = "Pinguins no Arquipélago Palmer na Antártica",
subtitle = "palmerpinguins in R dataset") %>%
opt_align_table_header(align = "left") %>%
cols_align(align = "right",
columns = c(`Adelie (female)`, `Adelie (male)`,
`Gentoo (female)`, `Gentoo (male)`,
`Chinstrap (female)`, `Chinstrap (male)`)) %>%
cols_label(
`Adelie (female)` = "female",
`Adelie (male)`   = "male",
`Gentoo (female)` = "female",
`Gentoo (male)`   = "male",
`Chinstrap (female)` = "female",
`Chinstrap (male)` = "male"
) %>%
tab_spanner(
label = c("Adele"),
columns = c(`Adelie (female)`, `Adelie (male)`)
) %>%
tab_spanner(
label = c("Gentoo"),
columns = c(`Gentoo (female)`, `Gentoo (male)`)
) %>%
tab_spanner(
label = c("Chinstrap"),
columns = c(`Chinstrap (female)`, `Chinstrap (male)`)
) %>%
tab_style(style = cell_text(weight = "bold"),
location = cells_column_spanners()) %>%
tab_style(style = cell_text(weight = "bold"),
location = cells_row_groups()) %>%
sub_missing(
columns = everything(),
missing_text = "-"
)
fns_labels <-
list(
# avg = ~mean(., na.rm = TRUE),
`Média` = ~mean(., na.rm = TRUE)
#,
# s.d. = ~sd(., na.rm = TRUE)
)
penguins_gt <-
penguins_gt %>%
summary_rows(
groups = TRUE,
columns = c(`Adelie (female)`, `Adelie (male)`,
`Gentoo (female)`, `Gentoo (male)`,
`Chinstrap (female)`, `Chinstrap (male)`),
fns = fns_labels,
formatter = fmt_number,
decimals = 0
) %>%
tab_style(style = cell_fill(color = "lightgray"),
location = cells_summary())
penguins_gt
penguins_gt <-
penguins_gt %>%
sub_zero(columns = c(`Adelie (female)`, `Adelie (male)`,
`Gentoo (female)`, `Gentoo (male)`,
`Chinstrap (female)`, `Chinstrap (male)`),
zero_text = "-")
fns_grand_labels <-
list(
`Média Geral` = ~mean(., na.rm = TRUE)
)
penguins_gt <-
penguins_gt %>%
grand_summary_rows(
columns = c(`Adelie (female)`, `Adelie (male)`,
`Gentoo (female)`, `Gentoo (male)`,
`Chinstrap (female)`, `Chinstrap (male)`),
fns = fns_grand_labels,
formatter = fmt_number,
decimals = 0,
missing_text = "-"
) %>%
tab_style(style = cell_fill(color = "darkgray"),
location = cells_grand_summary())
penguins_gt %>%
gtsave(filename = "penguins_gt.png",
path = "./2022-11-05-r-tip-criando-tabelas-com-o-pacote-gt")
mtcars
mtcars %>%
dplyr::group_by(cyl) %>%
dplyr::summarize(
mean = mean(mpg),
sd = sd(mpg),
# must end up with list of data for each row in the input dataframe
mpg_data = list(mpg),
.groups = "drop"
)
library(tidyverse)
mtcars %>%
dplyr::group_by(cyl) %>%
dplyr::summarize(
mean = mean(mpg),
sd = sd(mpg),
# must end up with list of data for each row in the input dataframe
mpg_data = list(mpg),
.groups = "drop"
)
car_summary <- mtcars %>%
dplyr::group_by(cyl) %>%
dplyr::summarize(
mean = mean(mpg),
sd = sd(mpg),
# must end up with list of data for each row in the input dataframe
mpg_data = list(mpg),
.groups = "drop"
)
car_summary$mpg_data[1]
library(palmerpenguins)
library(tidyverse)
library(gt)
library(gtExtras)
#| echo: fenced
#| warning: false
#| message: false
penguins_gt <-
penguins %>%
count(species, year) %>%
pivot_wider(names_from = year,
values_from = n) %>%
gt()
penguins_gt
#| echo: fenced
#| warning: false
#| message: false
penguins_gt <-
penguins %>%
count(species, year) %>%
group_by(species) %>%
mutate(evolution = list(n)) %>%
ungroup() %>%
pivot_wider(names_from = year,
values_from = n) %>%
relocate(evolution, .after = last_col()) %>%
gt() %>%
tab_header(title = "Pinguins no Arquipélago Palmer na Antártica",
subtitle = "palmerpinguins in R dataset") %>%
opt_align_table_header(align = "left") %>%
cols_align(align = "left",
columns = c(species)) %>%
cols_align(align = "right",
columns = c(`2007`, `2008`, `2009`)) %>%
cols_align(align = "center",
columns = c(evolution)) %>%
cols_label(
species = "Espécie",
evolution = "Evolução"
) %>%
tab_spanner(
label = c("Ano de medição"),
columns = c(`2007`, `2008`, `2009`)
) %>%
gt_plt_sparkline(evolution)
penguins_gt %>%
gtsave(filename = "penguins.png",
path = "./posts/2022-11-06-r-tip-tabelas-com-gtextras")
penguins
penguins
penguins_gt <-
penguins %>%
count(species, year) %>%
group_by(species) %>%
mutate(evolution = list(n)) %>%
ungroup() %>%
pivot_wider(names_from = year,
values_from = n) %>%
relocate(evolution, .after = last_col()) %>%
gt()
penguins %>%
count(species, year) %>%
group_by(species) %>%
mutate(evolution = list(n)) %>%
ungroup() %>%
pivot_wider(names_from = year,
values_from = n) %>%
relocate(evolution, .after = last_col()) %>%
gt() %>%
tab_header(title = "Pinguins no Arquipélago Palmer na Antártica",
subtitle = "palmerpinguins in R dataset")
penguins %>%
count(species, year) %>%
group_by(species) %>%
mutate(evolution = list(n)) %>%
ungroup() %>%
pivot_wider(names_from = year,
values_from = n) %>%
relocate(evolution, .after = last_col()) %>%
gt() %>%
tab_header(title = "Pinguins no Arquipélago Palmer na Antártica",
subtitle = "palmerpinguins in R dataset") %>%
opt_align_table_header(align = "left") %>%
cols_align(align = "left",
columns = c(species)) %>%
cols_align(align = "right",
columns = c(`2007`, `2008`, `2009`)) %>%
cols_align(align = "center",
columns = c(evolution)) %>%
cols_label(
species = "Espécie",
evolution = "Evolução"
) %>%
tab_spanner(
label = c("Ano de medição"),
columns = c(`2007`, `2008`, `2009`)
) %>%
gt_plt_sparkline(evolution)
#| echo: fenced
#| warning: false
#| message: false
penguins_gt <-
penguins %>%
count(species, year) %>%
group_by(species) %>%
mutate(evolution = list(n)) %>%
ungroup() %>%
pivot_wider(names_from = year,
values_from = n) %>%
relocate(evolution, .after = last_col()) %>%
gt() %>%
tab_header(title = "Pinguins no Arquipélago Palmer na Antártica",
subtitle = "palmerpinguins in R dataset") %>%
opt_align_table_header(align = "left") %>%
cols_align(align = "left",
columns = c(species)) %>%
cols_align(align = "right",
columns = c(`2007`, `2008`, `2009`)) %>%
cols_align(align = "center",
columns = c(evolution)) %>%
cols_label(
species = "Espécie",
evolution = "Evolução"
) %>%
tab_spanner(
label = c("Ano de medição"),
columns = c(`2007`, `2008`, `2009`)
) %>%
gt_plt_sparkline(evolution)
penguins_gt %>%
gtsave(filename = "penguins.png",
path = "./posts/2022-11-06-r-tip-tabelas-com-gtextras")
penguins_gt %>%
gtsave(filename = "new_penguins.png",
path = "./posts/2022-11-06-r-tip-tabelas-com-gtextras")
getwd()
setwd()
penguins_gt %>%
gtsave(filename = "new_penguins.png",
path = str_c(getwd(), "./posts/2022-11-06-r-tip-tabelas-com-gtextras"))
my_path = str_c(getwd(), "./posts/2022-11-06-r-tip-tabelas-com-gtextras")
my_path
penguins_gt %>%
gtsave(filename = "new_penguins.png",
path = my_path)
my_path = str_c(getwd(), "/posts/2022-11-06-r-tip-tabelas-com-gtextras")
my_path
penguins_gt %>%
gtsave(filename = "new_penguins.png",
path = my_path)
my_path = str_c(getwd(), "/posts/2022-11-06-r-tip-tabelas-com-gtextras")
penguins_gt %>%
gtsave(filename = "new_penguins.png",
path = my_path)
penguins
penguins_gt
gtsave
?gtsave
install.packages("webshot2")
install.packages("webshot2")
?webshot2
library(palmerpenguins)
library(tidyverse)
library(gt)
library(gtExtras)
#| echo: fenced
#| warning: false
#| message: false
penguins_gt <-
penguins %>%
count(species, year) %>%
pivot_wider(names_from = year,
values_from = n) %>%
gt()
penguins_gt
#| echo: fenced
#| warning: false
#| message: false
penguins_gt <-
penguins %>%
count(species, year) %>%
group_by(species) %>%
mutate(evolution = list(n)) %>%
ungroup() %>%
pivot_wider(names_from = year,
values_from = n) %>%
relocate(evolution, .after = last_col()) %>%
gt() %>%
tab_header(title = "Pinguins no Arquipélago Palmer na Antártica",
subtitle = "palmerpinguins in R dataset") %>%
opt_align_table_header(align = "left") %>%
cols_align(align = "left",
columns = c(species)) %>%
cols_align(align = "right",
columns = c(`2007`, `2008`, `2009`)) %>%
cols_align(align = "center",
columns = c(evolution)) %>%
cols_label(
species = "Espécie",
evolution = "Evolução"
) %>%
tab_spanner(
label = c("Ano de medição"),
columns = c(`2007`, `2008`, `2009`)
) %>%
gt_plt_sparkline(evolution)
my_path = str_c(getwd(), "/posts/2022-11-06-r-tip-tabelas-com-gtextras")
my_path
penguins_gt %>%
gtsave(filename = "new_penguins.png",
path = my_path)
penguins_gt
#| echo: fenced
#| warning: false
#| message: false
penguins_gt <-
penguins %>%
count(species, year) %>%
group_by(species) %>%
mutate(evolution = list(n)) %>%
ungroup() %>%
pivot_wider(names_from = year,
values_from = n) %>%
relocate(evolution, .after = last_col()) %>%
arrange(desc(`2009`)) %>%
gt() %>%
tab_header(title = "Pinguins no Arquipélago Palmer na Antártica",
subtitle = "palmerpinguins in R dataset") %>%
opt_align_table_header(align = "left") %>%
cols_align(align = "left",
columns = c(species)) %>%
cols_align(align = "right",
columns = c(`2007`, `2008`, `2009`)) %>%
cols_align(align = "center",
columns = c(evolution)) %>%
cols_label(
species = "Espécie",
evolution = "Evolução"
) %>%
tab_spanner(
label = c("Ano de medição"),
columns = c(`2007`, `2008`, `2009`)
) %>%
gt_plt_sparkline(evolution)
penguins_gt
