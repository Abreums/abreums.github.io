filter(year == min(year) | year == max(year)) %>%
select(country, year, pop)
south_america_pop %>%
mutate(year = factor(as.character(year)),
country = fct_reorder(country, pop)) %>%
ggplot(aes(x = country, y = pop, fill = year)) +
geom_col(position = position_dodge2())  +
scale_fill_manual(
name = NULL,
values = c(`1952` = "#D55E00", `2007` = "#009E73"),
labels = c(`1952` = "<i style='color:#D55E00'>1952</i>",
`2007` = "<i style='color:#009E73'>2007</i>")
) +
labs(title = "Evolução Populacional de
<span style='color:#D55E00;'>1952</span> a
<span style='color:#009E73;'>2007</span>",
subtitle = "América do Sul",
x = NULL,
y = NULL,
fill = NULL) +
theme_minimal() +
theme(
#legend.position = "none",
plot.title = element_markdown(lineheight = 1.1),
legend.text = element_markdown(size = 11),
axis.text.x = element_blank(),
panel.grid.major.x = element_blank(),
panel.grid.major.y = element_blank()
) +
coord_flip()
south_america_pop %>%
mutate(year = factor(as.character(year)),
country = fct_reorder(country, pop)) %>%
ggplot(aes(x = country, y = pop, fill = year)) +
geom_col(position = position_dodge2())  +
scale_fill_manual(
name = NULL,
values = c(`1952` = "#D55E00", `2007` = "#009E73"),
labels = c(`1952` = "<i style='color:#D55E00'>1952</i>",
`2007` = "<i style='color:#009E73'>2007</i>")
) +
labs(title = "Evolução Populacional de
<span style='color:#D55E00;'><i>1952</i></span> a
<span style='color:#009E73;'><i>2007</i></span>",
subtitle = "América do Sul",
x = NULL,
y = NULL,
fill = NULL) +
theme_minimal() +
theme(
#legend.position = "none",
plot.title = element_markdown(lineheight = 1.1),
legend.text = element_markdown(size = 11),
axis.text.x = element_blank(),
panel.grid.major.x = element_blank(),
panel.grid.major.y = element_blank()
) +
coord_flip()
south_america_pop
countries <- south_america_pop
countries <- south_america_pop
segment_helper <- countries  %>%
pivot_wider(names_from = year, values_from = pop, names_prefix = 'year_') |>
mutate(
change = year_2007 - year_1952,
country = fct_reorder(country, change)
)
segment_helper
ggplot() +
geom_segment(
data = segment_helper,
aes(y = country, yend = country, x = year_1952, xend = year_2007),
col = 'grey60',
size = 1.25
)
ggplot() +
geom_segment(
data = segment_helper,
aes(y = country, yend = country, x = year_1952, xend = year_2007),
col = 'grey60',
size = 1.25
) +
geom_point(
data = countries,
aes(x = pop, y = country, col = year), size = 4
)
color_palette <- thematic::okabe_ito(2)
names(color_palette) <- c(1952, 2007)
countries <- south_america_pop
create_dot_plot <- function(countries, sort_var = NULL) {
segment_helper <- countries  %>%
pivot_wider(names_from = year, values_from = pop, names_prefix = 'year_') |>
mutate(
change = year_2007 - year_1952,
country = fct_reorder(country, change)
)
# Missing is the key here to check whether sort_var is not NULL
# Make sure that dots are ordered such that change of direction is visible
if (!missing(sort_var)) {
segment_helper <- segment_helper  %>%
mutate(country = fct_reorder(country, {{sort_var}} * if_else(change < 0, -1, 1)))
}
ggplot() +
geom_segment(
data = segment_helper,
aes(y = country, yend = country, x = year_1952, xend = year_2007),
col = 'grey60',
size = 1.25
) +
geom_point(
data = countries,
aes(x = pop, y = country, col = year), size = 4
) +
labs(
x = str_to_upper('Life expectancy'),
y = element_blank(),
title = title_text,
caption = 'Data: '
) +
scale_color_manual(values = color_palette) +
theme(
panel.grid.major.y = element_blank(),
panel.grid.minor.x = element_blank()
) +
scale_x_continuous(expand = expansion(mult = 0.01))
}
create_dot_plot(selected_countries)
() +
() +
() +
install.packages("thematic")
color_palette <- thematic::okabe_ito(2)
names(color_palette) <- c(1952, 2007)
color_palette
countries <- south_america_pop
create_dot_plot <- function(countries, sort_var = NULL) {
segment_helper <- countries  %>%
pivot_wider(names_from = year, values_from = pop, names_prefix = 'year_') |>
mutate(
change = year_2007 - year_1952,
country = fct_reorder(country, change)
)
# Missing is the key here to check whether sort_var is not NULL
# Make sure that dots are ordered such that change of direction is visible
if (!missing(sort_var)) {
segment_helper <- segment_helper  %>%
mutate(country = fct_reorder(country, {{sort_var}} * if_else(change < 0, -1, 1)))
}
ggplot() +
geom_segment(
data = segment_helper,
aes(y = country, yend = country, x = year_1952, xend = year_2007),
col = 'grey60',
size = 1.25
) +
geom_point(
data = countries,
aes(x = pop, y = country, col = year), size = 4
) +
labs(
x = str_to_upper('Life expectancy'),
y = element_blank(),
title = title_text,
caption = 'Data: '
) +
scale_color_manual(values = color_palette) +
theme(
panel.grid.major.y = element_blank(),
panel.grid.minor.x = element_blank()
) +
scale_x_continuous(expand = expansion(mult = 0.01))
}
create_dot_plot(selected_countries)
create_dot_plot(south_america_pop)
create_dot_plot <- function(countries, sort_var = NULL) {
segment_helper <- countries  %>%
pivot_wider(names_from = year, values_from = pop, names_prefix = 'year_') |>
mutate(
change = year_2007 - year_1952,
country = fct_reorder(country, change)
)
# Missing is the key here to check whether sort_var is not NULL
# Make sure that dots are ordered such that change of direction is visible
if (!missing(sort_var)) {
segment_helper <- segment_helper  %>%
mutate(country = fct_reorder(country, {{sort_var}} * if_else(change < 0, -1, 1)))
}
ggplot() +
geom_segment(
data = segment_helper,
aes(y = country, yend = country, x = year_1952, xend = year_2007),
col = 'grey60',
size = 1.25
) +
geom_point(
data = countries,
aes(x = pop, y = country, col = year), size = 4
) +
labs(
x = str_to_upper('Life expectancy'),
y = element_blank(),
title = "title_text",
caption = 'Data: '
) +
scale_color_manual(values = color_palette) +
theme(
panel.grid.major.y = element_blank(),
panel.grid.minor.x = element_blank()
) +
scale_x_continuous(expand = expansion(mult = 0.01))
}
create_dot_plot(south_america_pop)
color_palette
segment_line <-
south_america_pop %>%
pivot_wider(names_from = year, values_from = pop, names_prefix = 'year_') %>%
mutate(
change = year_2007 - year_1952,
country = fct_reorder(country, change)
)
segment_line
ggplot() +
geom_segment(
data = segment_line,
aes(y = country, yend = country, x = year_1952, xend = year_2007),
col = 'grey60',
size = 1.25
)
ggplot() +
geom_segment(
data = segment_line,
aes(y = country, yend = country, x = year_1952, xend = year_2007),
col = 'grey60',
size = 1.25
) +
geom_point(
data = countries,
aes(x = pop, y = country, col = year), size = 4
)
ggplot() +
geom_segment(
data = segment_line,
aes(y = country, yend = country, x = year_1952, xend = year_2007),
col = 'grey60',
size = 1.25
) +
geom_point(
data = countries,
aes(x = pop, y = country, col = year), size = 4
) +
scale_color_manual(
name = NULL,
values = c(year_1956 = "pink", year_2007 = "red")
)
south_america_pop <-
south_america_pop %>%
mutate(year = factor(year))
#dumbbell_plot <-
ggplot() +
geom_segment(
data = segment_line,
aes(y = country, yend = country, x = year_1952, xend = year_2007),
col = 'grey60',
size = 1.25
) +
geom_point(
data = countries,
aes(x = pop, y = country, col = year), size = 4
) +
scale_color_manual(
name = NULL,
values = c(year_1956 = "pink", year_2007 = "red")
)
#dumbbell_plot <-
ggplot() +
geom_segment(
data = segment_line,
aes(y = country, yend = country, x = year_1952, xend = year_2007),
col = 'grey60',
size = 1.25
) +
geom_point(
data = countries,
aes(x = pop, y = country, col = year), size = 4
)
countries
#dumbbell_plot <-
ggplot() +
geom_segment(
data = segment_line,
aes(y = country, yend = country, x = year_1952, xend = year_2007),
col = 'grey60',
size = 1.25
) +
geom_point(
data = countries,
aes(x = pop, y = country, col = year), size = 4
)
#dumbbell_plot <-
ggplot() +
geom_segment(
data = segment_line,
aes(y = country, yend = country, x = year_1952, xend = year_2007),
col = 'grey60',
size = 1.25
) +
geom_point(
data = countries,
aes(x = pop, y = country, col = year), size = 4
) +
scale_color_manual(
name = NULL,
values = c(`1952` = "pink", `2007` = "red")
)
okabe_ito(2)
#dumbbell_plot <-
ggplot() +
geom_segment(
data = segment_line,
aes(y = country, yend = country, x = year_1952, xend = year_2007),
col = 'grey60',
size = 1.25
) +
geom_point(
data = countries,
aes(x = pop, y = country, col = year), size = 4
) +
scale_color_manual(
name = NULL,
values = c(1952 = "pink", 2007 = "red")
#dumbbell_plot <-
ggplot() +
geom_segment(
data = segment_line,
aes(y = country, yend = country, x = year_1952, xend = year_2007),
col = 'grey60',
size = 1.25
) +
geom_point(
data = south_america_pop,
aes(x = pop, y = country, colour = year), size = 4
) +
scale_color_manual(
name = NULL,
values = c(`1952` = "pink", `2007` = "red")
)
#dumbbell_plot <-
ggplot() +
geom_segment(
data = segment_line,
aes(y = country, yend = country, x = year_1952, xend = year_2007),
col = 'grey60',
size = 1.25
) +
geom_point(
data = south_america_pop,
aes(x = pop, y = country, colour = year), size = 4
) +
scale_color_manual(
name = NULL,
values = c(`1952` = "#D55E00", `2007` = "#009E73"),
labels = c(`1952` = "<i style='color:#D55E00'>1952</i>",
`2007` = "<i style='color:#009E73'>2007</i>")
)
ggplot() +
geom_segment(
data = segment_line,
aes(y = country, yend = country, x = year_1952, xend = year_2007),
col = 'grey60',
size = 1.25
) +
geom_point(
data = south_america_pop,
aes(x = pop, y = country, colour = year), size = 4
) +
scale_color_manual(
name = NULL,
values = c(`1952` = "#D55E00", `2007` = "#009E73"),
labels = c(`1952` = "<i style='color:#D55E00'>1952</i>",
`2007` = "<i style='color:#009E73'>2007</i>")
) +
labs(title = "Evolução Populacional de
<span style='color:#D55E00;'><i>1952</i></span> a
<span style='color:#009E73;'><i>2007</i></span>",
subtitle = "América do Sul",
x = NULL,
y = NULL,
fill = NULL) +
theme_minimal() +
theme(
legend.position = "none",
plot.title = element_markdown(lineheight = 1.1),
legend.text = element_markdown(size = 11),
axis.text.x = element_blank(),
panel.grid.major.x = element_blank(),
panel.grid.major.y = element_blank()
)
dumbbell_plot <-
ggplot() +
geom_segment(
data = segment_line,
aes(y = country, yend = country, x = year_1952, xend = year_2007),
col = 'grey60',
size = 1.25
) +
geom_point(
data = south_america_pop,
aes(x = pop, y = country, colour = year), size = 4
) +
scale_color_manual(
name = NULL,
values = c(`1952` = "#D55E00", `2007` = "#009E73"),
labels = c(`1952` = "<i style='color:#D55E00'>1952</i>",
`2007` = "<i style='color:#009E73'>2007</i>")
) +
labs(title = "Evolução Populacional de
<span style='color:#D55E00;'><i>1952</i></span> a
<span style='color:#009E73;'><i>2007</i></span>",
subtitle = "América do Sul",
x = NULL,
y = NULL,
fill = NULL) +
theme_minimal() +
theme(
legend.position = "none",
plot.title = element_markdown(lineheight = 1.1),
legend.text = element_markdown(size = 11),
axis.text.x = element_blank(),
panel.grid.major.x = element_blank(),
panel.grid.major.y = element_blank()
) +
scale_x_continuous(expand = expansion(mult = 0.01))
dumbbell_plot
dumbbell_plot <-
ggplot() +
geom_segment(
data = segment_line,
aes(y = country, yend = country, x = year_1952, xend = year_2007),
col = 'grey60',
size = 1.25
) +
geom_point(
data = south_america_pop,
aes(x = pop, y = country, colour = year), size = 4
) +
scale_color_manual(
name = NULL,
values = c(`1952` = "#D55E00", `2007` = "#009E73"),
labels = c(`1952` = "<i style='color:#D55E00'>1952</i>",
`2007` = "<i style='color:#009E73'>2007</i>")
) +
labs(title = "Evolução Populacional de
<span style='color:#D55E00;'><i>1952</i></span> a
<span style='color:#009E73;'><i>2007</i></span>",
subtitle = "América do Sul",
x = NULL,
y = NULL,
fill = NULL) +
theme_minimal() +
theme(
legend.position = "none",
plot.title = element_markdown(lineheight = 1.1),
legend.text = element_markdown(size = 11),
axis.text.x = element_blank(),
panel.grid.major.x = element_blank(),
panel.grid.major.y = element_blank()
) +
scale_x_continuous(expand = expansion(mult = 0.11))
dumbbell_plot
dumbbell_plot <-
ggplot() +
geom_segment(
data = segment_line,
aes(y = country, yend = country, x = year_1952, xend = year_2007),
col = 'grey60',
size = 1.25
) +
geom_point(
data = south_america_pop,
aes(x = pop, y = country, colour = year), size = 4
) +
scale_color_manual(
name = NULL,
values = c(`1952` = "#D55E00", `2007` = "#009E73"),
labels = c(`1952` = "<i style='color:#D55E00'>1952</i>",
`2007` = "<i style='color:#009E73'>2007</i>")
) +
labs(title = "Evolução Populacional de
<span style='color:#D55E00;'><i>1952</i></span> a
<span style='color:#009E73;'><i>2007</i></span>",
subtitle = "América do Sul",
x = NULL,
y = NULL,
fill = NULL) +
theme_minimal() +
theme(
legend.position = "none",
plot.title = element_markdown(lineheight = 1.1),
legend.text = element_markdown(size = 11),
axis.text.x = element_blank(),
panel.grid.major.x = element_blank(),
panel.grid.major.y = element_blank()
)
dumbbell_plot
ggsave("dumbbell.png")
ggplot(data.frame(x = c(-4, 4)), aes(x = x)) +
stat_function(fun = dnorm)
library(tidyverse)
ggplot(data.frame(x = c(-4, 4)), aes(x = x)) +
stat_function(fun = dnorm)
rnorm
?rnorm
